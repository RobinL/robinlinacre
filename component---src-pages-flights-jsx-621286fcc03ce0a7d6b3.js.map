{"version":3,"sources":["webpack:///./node_modules/@robinl/my-flights/fe522555ef506fc9@511.js","webpack:///./src/pages/flights.jsx","webpack:///./node_modules/core-js/modules/es6.date.to-iso-string.js","webpack:///./node_modules/core-js/modules/_date-to-iso-string.js"],"names":["_templateObject2","data","_templateObject","define","runtime","observer","main","module","variable","md","diff_years","start_end_date","format_date","routes","fmt_num","average_miles","total_miles","fmt_num_round","eu","tonnes_co2","length","flying","flying_miles_to_kwh","DOM","width","height","d3","projection","sphere","land","resample","colour_scale","drag","context","context2d","path","geoPath","render","clearRect","beginPath","fillStyle","fill","stroke","forEach","d","coordinates","resampled","mid_point_with_drift","route","type","lineWidth","lineO","strokeStyle","select","canvas","call","on","node","geoOrthographic","fitExtent","translate","rotate","precision","kwh_to_kg_co2","kwh","convert","per","sum","mean","require","extent","format","dt2","dt1","diff","getTime","Math","abs","round","toISOString","split","scaleSequential","interpolateOrRd","domain","i","n","before","after","c0","slice","c1","p0","p1","x10","y10","d1","push","c2","geoInterpolate","p2","x20","y20","dz","t","invert","versor","v0","q0","r0","cartesian","mouse","this","v1","q1","multiply","delta","rotation","topojson","world","feature","objects","json","csv","autoType","routes_raw","map","random","frontmatter","title","post_date","code_url","post_type","post_category","output_order","post_frontmatter","$export","P","F","Date","prototype","fails","$toISOString","lz","num","exports","NaN","isFinite","RangeError","y","getUTCFullYear","m","getUTCMilliseconds","s","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds"],"mappings":"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","file":"component---src-pages-flights-jsx-621286fcc03ce0a7d6b3.js","sourcesContent":["import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.date.to-iso-string\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.fill\";\nimport _taggedTemplateLiteral from \"/home/runner/work/robinlinacre/robinlinacre/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"Between \", \" and \", \" I took \", \" flights with and average distance of \", \" miles, and total milage of \", \".  Total energy usage was around \", \" kwh or \", \" tonnes of co2.\\n\\nYou can drag the globe below to rotate.\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"# \", \" years of flights\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n// https://observablehq.com/@robinl/my-flights@511\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer(\"title\")).define(\"title\", [\"md\", \"diff_years\", \"start_end_date\"], function (md, diff_years, start_end_date) {\n    return md(_templateObject(), diff_years(start_end_date[1], start_end_date[0]));\n  });\n  main.variable(observer(\"blurb\")).define(\"blurb\", [\"md\", \"format_date\", \"start_end_date\", \"routes\", \"fmt_num\", \"average_miles\", \"total_miles\", \"fmt_num_round\", \"eu\", \"tonnes_co2\"], function (md, format_date, start_end_date, routes, fmt_num, average_miles, total_miles, fmt_num_round, eu, tonnes_co2) {\n    return md(_templateObject2(), format_date(start_end_date[0]), format_date(start_end_date[1]), routes.length, fmt_num(average_miles), fmt_num(total_miles), fmt_num_round(eu.flying.flying_miles_to_kwh(total_miles)), fmt_num_round(tonnes_co2));\n  });\n  main.variable(observer(\"chart\")).define(\"chart\", [\"DOM\", \"width\", \"height\", \"d3\", \"projection\", \"sphere\", \"land\", \"routes\", \"resample\", \"colour_scale\", \"drag\"], function (DOM, width, height, d3, projection, sphere, land, routes, resample, colour_scale, drag) {\n    var context = DOM.context2d(width, height);\n    var path = d3.geoPath(projection, context);\n\n    function render() {\n      context.clearRect(0, 0, width, height);\n      context.beginPath(), path(sphere), context.fillStyle = \"#fff\", context.fill();\n      context.beginPath(), path(land), context.fillStyle = \"#000\", context.fill();\n      context.beginPath(), path(sphere), context.stroke();\n      routes.forEach(function (d) {\n        var coordinates = [[d[\"lng_from\"], d[\"lat_from\"]], [d[\"lng_to\"], d[\"lat_to\"]]];\n        var resampled = resample(coordinates);\n        var mid_point_with_drift = [resampled[\"after\"][1][0] + d[\"random\"], resampled[\"after\"][1][1] + d[\"random\"]];\n        resampled[\"after\"][1] = mid_point_with_drift;\n        var route = {\n          type: \"LineString\",\n          coordinates: resampled[\"after\"]\n        };\n        context.lineWidth = 1;\n        context.lineO;\n        context.beginPath(), path(route), context.strokeStyle = colour_scale(d[\"date\"]), context.stroke();\n      });\n      context.lineWidth = 1;\n      context.strokeStyle = \"#000000\";\n    }\n\n    return d3.select(context.canvas).call(drag(projection).on(\"drag.render\", render)).call(render).node();\n  });\n  main.variable(observer(\"projection\")).define(\"projection\", [\"d3\", \"width\", \"height\", \"sphere\"], function (d3, width, height, sphere) {\n    return d3.geoOrthographic().fitExtent([[1, 1], [width - 1, height - 1]], sphere).translate([width / 2, height / 2]).rotate([0, -51]).precision(0.1);\n  });\n  main.variable(observer(\"tonnes_co2\")).define(\"tonnes_co2\", [\"kwh_to_kg_co2\", \"eu\", \"total_miles\"], function (kwh_to_kg_co2, eu, total_miles) {\n    return kwh_to_kg_co2(eu.flying.flying_miles_to_kwh(total_miles)) / 1000;\n  });\n  main.variable(observer(\"kwh_to_kg_co2\")).define(\"kwh_to_kg_co2\", [\"eu\"], function (eu) {\n    return function (kwh) {\n      return kwh * eu.convert.per(\"kg_co2_jet_fuel/kwh\");\n    };\n  });\n  main.variable(observer(\"total_miles\")).define(\"total_miles\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.sum(routes, function (d) {\n      return d[\"distance\"];\n    });\n  });\n  main.variable(observer(\"average_miles\")).define(\"average_miles\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.mean(routes, function (d) {\n      return d[\"distance\"];\n    });\n  });\n  main.variable(observer(\"eu\")).define(\"eu\", [\"require\"], function (require) {\n    return require(\"@robinl/energy_usage@0.0.34\");\n  });\n  main.variable(observer(\"start_end_date\")).define(\"start_end_date\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.extent(routes, function (d) {\n      return d[\"date\"];\n    });\n  });\n  main.variable(observer(\"fmt_num\")).define(\"fmt_num\", [\"d3\"], function (d3) {\n    return d3.format(\",.0f\");\n  });\n  main.variable(observer(\"fmt_num_round\")).define(\"fmt_num_round\", [\"d3\"], function (d3) {\n    return d3.format(\",.2r\");\n  });\n  main.variable(observer(\"diff_years\")).define(\"diff_years\", function () {\n    return function diff_years(dt2, dt1) {\n      var diff = (dt2.getTime() - dt1.getTime()) / 1000;\n      diff /= 60 * 60 * 24;\n      return Math.abs(Math.round(diff / 365.25));\n    };\n  });\n  main.variable(observer(\"format_date\")).define(\"format_date\", function () {\n    return function (d) {\n      return d.toISOString().split('T')[0];\n    };\n  });\n  main.variable(observer(\"colour_scale\")).define(\"colour_scale\", [\"d3\", \"routes\"], function (d3, routes) {\n    return d3.scaleSequential(d3.interpolateOrRd).domain(d3.extent(routes, function (d) {\n      return d[\"date\"];\n    }));\n  });\n  main.variable(observer(\"resample\")).define(\"resample\", [\"projection\", \"d3\"], function (projection, d3) {\n    return function resample(coordinates) {\n      var i = 0,\n          n = coordinates.length,\n          before = [],\n          after = [];\n\n      while (++i < n) {\n        var c0 = coordinates[i - 1].slice(),\n            c1 = coordinates[i].slice(),\n            p0 = projection(c0),\n            p1 = projection(c1),\n            x10 = p1[0] - p0[0],\n            y10 = p1[1] - p0[1],\n            d1 = x10 * x10 + y10 * y10;\n        before.push(c0);\n        after.push(c0);\n\n        if (d1 > 4 * .1) {\n          // linear distance check\n          var c2 = d3.geoInterpolate(c0, c1)(.5),\n              p2 = projection(c2),\n              x20 = p2[0] - p0[0],\n              y20 = p2[1] - p0[1],\n              dz = y10 * x20 - x10 * y20;\n\n          if (dz * dz / d1 > .1) {\n            // perpendicular distance check\n            var t = (x20 * x10 + y20 * y10) / d1;\n            before.push(projection.invert(c2.resampled = [p0[0] + t * x10, p0[1] + t * y10]));\n            after.push(c2);\n          }\n        }\n      }\n\n      if (n) before.push(c1), after.push(c1);\n      return {\n        before: before,\n        after: after\n      };\n    };\n  });\n  main.variable(observer(\"drag\")).define(\"drag\", [\"versor\", \"d3\"], function (versor, d3) {\n    return function drag(projection) {\n      var v0, q0, r0;\n\n      function dragstarted() {\n        v0 = versor.cartesian(projection.invert(d3.mouse(this)));\n        q0 = versor(r0 = projection.rotate());\n      }\n\n      function dragged() {\n        var v1 = versor.cartesian(projection.rotate(r0).invert(d3.mouse(this)));\n        var q1 = versor.multiply(q0, versor.delta(v0, v1));\n        projection.rotate(versor.rotation(q1));\n      }\n\n      return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged);\n    };\n  });\n  main.variable(observer(\"height\")).define(\"height\", [\"width\"], function (width) {\n    return width;\n  });\n  main.variable(observer(\"sphere\")).define(\"sphere\", function () {\n    return {\n      type: \"Sphere\"\n    };\n  });\n  main.variable(observer(\"land\")).define(\"land\", [\"topojson\", \"world\"], function (topojson, world) {\n    return topojson.feature(world, world.objects.land);\n  });\n  main.variable(observer(\"world\")).define(\"world\", [\"d3\"], function (d3) {\n    return d3.json(\"https://unpkg.com/world-atlas@1/world/110m.json\");\n  });\n  main.variable(observer(\"versor\")).define(\"versor\", [\"require\"], function (require) {\n    return require(\"versor@0.0.3\");\n  });\n  main.variable(observer(\"topojson\")).define(\"topojson\", [\"require\"], function (require) {\n    return require(\"topojson-client@3\");\n  });\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], function (require) {\n    return require(\"d3@5\");\n  });\n  main.variable(observer(\"routes_raw\")).define(\"routes_raw\", [\"d3\"], function (d3) {\n    return d3.csv(\"https://gist.githubusercontent.com/RobinL/ba3acbf42349115ed266a98643eb5a80/raw/a603b1fec071383d6a3eb27cbcda789c54cb0014/my_flights.csv\", d3.autoType);\n  });\n  main.variable(observer(\"routes\")).define(\"routes\", [\"routes_raw\"], function (routes_raw) {\n    return routes_raw.map(function (d) {\n      d[\"random\"] = (Math.random() - 0.5) * d[\"distance\"] / 1000;\n      return d;\n    });\n  });\n  return main;\n}","import React from 'react'\nimport define from \"@robinl/my-flights\"\nimport ObsMdxPage from \"../components/mdx_obs_page\"\n\nexport const frontmatter = {\n         title: \"My flights\",\n         post_date: \"2019-10-05\",\n         code_url: \"https://observablehq.com/@robinl/my-flights/\",\n         post_type: \"obs\",\n         post_category: \"energy\",\n       }\n\nlet output_order = [\n    \"title\",\n    \"blurb\",\n    \"chart\"\n]\n\nexport default ({ data }) => (\n    <ObsMdxPage\n        define={define}\n        output_order={output_order}\n        post_frontmatter={frontmatter}/>\n\n)\n","// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar $export = require('./_export');\nvar toISOString = require('./_date-to-iso-string');\n\n// PhantomJS / old WebKit has a broken implementations\n$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {\n  toISOString: toISOString\n});\n","'use strict';\n// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar fails = require('./_fails');\nvar getTime = Date.prototype.getTime;\nvar $toISOString = Date.prototype.toISOString;\n\nvar lz = function (num) {\n  return num > 9 ? num : '0' + num;\n};\n\n// PhantomJS / old WebKit has a broken implementations\nmodule.exports = (fails(function () {\n  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';\n}) || !fails(function () {\n  $toISOString.call(new Date(NaN));\n})) ? function toISOString() {\n  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');\n  var d = this;\n  var y = d.getUTCFullYear();\n  var m = d.getUTCMilliseconds();\n  var s = y < 0 ? '-' : y > 9999 ? '+' : '';\n  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +\n    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +\n    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +\n    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';\n} : $toISOString;\n"],"sourceRoot":""}